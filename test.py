
import streamlit as st
import folium
from streamlit_folium import st_folium

routeObj = {"total_distance":4505,"total_time":3244,"route_points":[{"name":"MARINA BAY FINANCIAL CENTRE (TOWER 3)","type":"Start","latitude":1.2795148364310702,"longitude":103.854251808558},{"name":"ANN SIANG HILL PK","type":"Park","latitude":1.280793,"longitude":103.84627600000002},{"name":"Indian National Army Memorial","type":"Historic Site","latitude":1.2893310000000004,"longitude":103.853714},{"name":"THE LEGENDS FORT CANNING PARK","type":"End","latitude":1.29633332548442,"longitude":103.845641414159}],"route_segments":[{"from_point":{"name":"MARINA BAY FINANCIAL CENTRE (TOWER 3)","type":"Start","latitude":1.2795148364310702,"longitude":103.854251808558},"to_point":{"name":"ANN SIANG HILL PK","type":"Park","latitude":1.280793,"longitude":103.84627600000002},"geometry":[[1.27906,103.85382],[1.27937,103.85337],[1.27947,103.85322],[1.27944,103.8532],[1.27944,103.8532],[1.27941,103.85318],[1.2794,103.85315],[1.27939,103.85311],[1.2794,103.8531],[1.27953,103.8529],[1.27972,103.8526],[1.27976,103.85259],[1.27977,103.85256],[1.27981,103.8525],[1.27981,103.85246],[1.28004,103.85211],[1.28019,103.85188],[1.2803,103.85172],[1.28031,103.85169],[1.28037,103.85164],[1.28046,103.85156],[1.28052,103.85149],[1.28057,103.85144],[1.28066,103.85134],[1.28072,103.85127],[1.28072,103.85125],[1.28071,103.85124],[1.28074,103.85121],[1.28083,103.85121],[1.28093,103.85105],[1.28095,103.85103],[1.28093,103.85102],[1.28092,103.851],[1.28091,103.85096],[1.28081,103.85089],[1.28078,103.85087],[1.28072,103.85079],[1.2807,103.85071],[1.28064,103.85039],[1.28059,103.85008],[1.28058,103.84998],[1.28045,103.8499],[1.28044,103.84989],[1.28041,103.84987],[1.28035,103.84984],[1.28034,103.84982],[1.28041,103.84969],[1.28042,103.84967],[1.28042,103.84967],[1.28055,103.84945],[1.28059,103.84937],[1.28069,103.84921],[1.28075,103.84909],[1.28074,103.84908],[1.28074,103.84908],[1.28075,103.84906],[1.28081,103.84895],[1.28082,103.84894],[1.28081,103.84893],[1.2807,103.84886],[1.28024,103.84857],[1.28017,103.84853],[1.27982,103.84831],[1.27977,103.84828],[1.27938,103.84806],[1.27936,103.84803],[1.27936,103.848],[1.27954,103.84768],[1.27955,103.84767],[1.27957,103.84766],[1.2796,103.84761],[1.27962,103.84758],[1.27961,103.84758],[1.27961,103.84756],[1.27961,103.84754],[1.27964,103.84751],[1.27968,103.84744],[1.27969,103.84743],[1.2797,103.84741],[1.27976,103.8473],[1.27979,103.84726],[1.27981,103.84725],[1.27983,103.84725],[1.27983,103.84717],[1.27982,103.84717],[1.27982,103.84717],[1.27982,103.84716],[1.27984,103.84708],[1.27975,103.84705],[1.27986,103.84673],[1.2799,103.84664],[1.27993,103.84663],[1.27998,103.84664],[1.28002,103.84665],[1.2801,103.84637],[1.28041,103.8464],[1.28071,103.84651]]},{"from_point":{"name":"ANN SIANG HILL PK","type":"Park","latitude":1.280793,"longitude":103.84627600000002},"to_point":{"name":"Indian National Army Memorial","type":"Historic Site","latitude":1.2893310000000004,"longitude":103.853714},"geometry":[[1.28071,103.84651],[1.28041,103.8464],[1.2801,103.84637],[1.28002,103.84665],[1.27998,103.84664],[1.27993,103.84663],[1.2799,103.84664],[1.27986,103.84673],[1.27975,103.84705],[1.27984,103.84708],[1.27982,103.84716],[1.27982,103.84717],[1.27982,103.84717],[1.27983,103.84717],[1.27983,103.84725],[1.27984,103.84724],[1.27998,103.84733],[1.28044,103.84756],[1.28073,103.8477],[1.28089,103.84779],[1.28132,103.84803],[1.28134,103.84804],[1.28135,103.84805],[1.28148,103.84812],[1.28175,103.84828],[1.28187,103.84835],[1.2819,103.84836],[1.28192,103.84838],[1.28197,103.84841],[1.28206,103.84847],[1.28208,103.84848],[1.28207,103.84849],[1.28208,103.84849],[1.28213,103.84848],[1.28225,103.84862],[1.28226,103.84863],[1.2826,103.84883],[1.28261,103.84884],[1.28276,103.84894],[1.2828,103.84899],[1.28295,103.84908],[1.28316,103.84921],[1.28317,103.84925],[1.28329,103.84935],[1.28337,103.84935],[1.28339,103.84936],[1.28341,103.84939],[1.28348,103.84945],[1.2835,103.84948],[1.28358,103.84958],[1.28361,103.8496],[1.28367,103.84959],[1.28377,103.84952],[1.28378,103.84951],[1.28384,103.84947],[1.28393,103.84939],[1.28397,103.84934],[1.284,103.84936],[1.28412,103.84947],[1.28415,103.8495],[1.28414,103.84957],[1.2841,103.84958],[1.28407,103.84963],[1.28409,103.84966],[1.28415,103.84975],[1.28415,103.84977],[1.28416,103.84983],[1.28416,103.84984],[1.28417,103.84985],[1.2842,103.84998],[1.28431,103.85008],[1.28501,103.8502],[1.28504,103.85021],[1.28505,103.85024],[1.28504,103.85028],[1.28502,103.85032],[1.28499,103.85036],[1.28499,103.85038],[1.28499,103.85046],[1.28502,103.8505],[1.28511,103.85051],[1.28508,103.8507],[1.28507,103.8508],[1.28502,103.85129],[1.28502,103.85129],[1.28502,103.8513],[1.28502,103.8513],[1.28502,103.8513],[1.28502,103.85131],[1.28502,103.85131],[1.28503,103.85131],[1.28503,103.85132],[1.28503,103.85132],[1.28503,103.85132],[1.28504,103.85133],[1.28504,103.85133],[1.28504,103.85133],[1.28505,103.85133],[1.28505,103.85133],[1.28505,103.85134],[1.28506,103.85134],[1.28532,103.85137],[1.28535,103.85135],[1.28544,103.85136],[1.28546,103.85138],[1.28548,103.85138],[1.28555,103.85133],[1.28566,103.85136],[1.28626,103.85254],[1.28687,103.85219],[1.28744,103.8526],[1.28763,103.85275],[1.28854,103.85334],[1.28878,103.85352],[1.28927,103.85385],[1.28932,103.85386]]},{"from_point":{"name":"Indian National Army Memorial","type":"Historic Site","latitude":1.2893310000000004,"longitude":103.853714},"to_point":{"name":"THE LEGENDS FORT CANNING PARK","type":"End","latitude":1.29633332548442,"longitude":103.845641414159},"geometry":[[1.28932,103.85386],[1.29034,103.85393],[1.29034,103.85415],[1.29037,103.85416],[1.29038,103.85418],[1.29039,103.85421],[1.29039,103.85424],[1.29081,103.85436],[1.29099,103.85443],[1.29096,103.85451],[1.29114,103.85455],[1.29152,103.85439],[1.29159,103.85452],[1.2916,103.85453],[1.2916,103.85454],[1.29173,103.85444],[1.29196,103.85425],[1.29216,103.85405],[1.29222,103.85399],[1.29233,103.85386],[1.29236,103.85382],[1.29241,103.85375],[1.29242,103.85375],[1.29251,103.85363],[1.29251,103.85361],[1.2926,103.85349],[1.29261,103.85349],[1.29258,103.85328],[1.29258,103.85319],[1.29258,103.85316],[1.29266,103.85315],[1.29269,103.85313],[1.29274,103.85311],[1.29281,103.85305],[1.29291,103.85292],[1.29295,103.85286],[1.29311,103.85263],[1.29338,103.85222],[1.29343,103.85209],[1.29345,103.85206],[1.29355,103.85191],[1.29356,103.85187],[1.29364,103.85181],[1.2939,103.85141],[1.29395,103.85133],[1.29398,103.85128],[1.29402,103.85122],[1.29435,103.85069],[1.29435,103.85064],[1.29448,103.8504],[1.29451,103.8504],[1.29452,103.85037],[1.29452,103.85037],[1.29456,103.85033],[1.29466,103.85014],[1.29469,103.85009],[1.29471,103.85006],[1.29475,103.85001],[1.29475,103.84999],[1.29481,103.84989],[1.29483,103.84987],[1.29483,103.84986],[1.29483,103.84984],[1.29483,103.84982],[1.29484,103.84981],[1.29492,103.84966],[1.29493,103.84964],[1.29494,103.84963],[1.29495,103.84962],[1.295,103.84953],[1.29501,103.84951],[1.29502,103.8495],[1.29504,103.84946],[1.29513,103.84932],[1.29517,103.84913],[1.29553,103.84862],[1.29552,103.8486],[1.2955,103.84858],[1.29543,103.84849],[1.29541,103.84847],[1.29539,103.84844],[1.29535,103.84839],[1.29536,103.84834],[1.29537,103.8483],[1.29541,103.8483],[1.29548,103.8483],[1.29556,103.8483],[1.29564,103.84829],[1.29572,103.84827],[1.2958,103.84825],[1.29581,103.84825],[1.29587,103.84822],[1.29594,103.84819],[1.29599,103.84817],[1.29604,103.84814],[1.29607,103.84811],[1.2961,103.84808],[1.29612,103.84805],[1.29618,103.84798],[1.29623,103.84792],[1.29623,103.84791],[1.29624,103.84789],[1.29624,103.84788],[1.29625,103.84788],[1.29628,103.84788],[1.29631,103.84787],[1.29631,103.84783],[1.2963,103.84779],[1.29635,103.84777],[1.29639,103.84775],[1.29642,103.84773],[1.2965,103.84767],[1.2965,103.84766],[1.29652,103.84764],[1.29659,103.84758],[1.29667,103.84751],[1.29673,103.84745],[1.29675,103.84742],[1.29678,103.84738],[1.2968,103.84734],[1.29684,103.84726],[1.2969,103.84711],[1.29694,103.84703],[1.29698,103.84694],[1.29699,103.8469],[1.29695,103.84688],[1.29695,103.84688],[1.29691,103.84686],[1.29684,103.84683],[1.29683,103.84683],[1.29684,103.84679],[1.29687,103.84671],[1.29689,103.84666],[1.2969,103.84661],[1.2969,103.84655],[1.2969,103.8465],[1.2969,103.84649],[1.2969,103.84645],[1.2969,103.84643],[1.29691,103.84635],[1.29691,103.84632],[1.29691,103.84625],[1.29691,103.84621],[1.29689,103.84614],[1.29685,103.84605],[1.29682,103.84597],[1.2968,103.84593],[1.2968,103.84587],[1.29674,103.8458],[1.29669,103.84573],[1.29664,103.84567],[1.29659,103.84562],[1.29655,103.84558],[1.29651,103.84553],[1.29644,103.84546],[1.29635,103.84553],[1.2964,103.8456]]}]}

routePoints = routeObj["route_points"] # Array of dicts.
routeSegments = routeObj['route_segments']

min_lon, max_lon = 102.6920, 105.0920
min_lat, max_lat = 1.0305, 1.5505



# Plot route segments (blue polylines)
for i in range(len(routeSegments)):
    indiv_segment = routeSegments[i]
    folium.PolyLine(
        locations=indiv_segment["geometry"],
        color="blue",
        weight=5,
        opacity=0.6
    ).add_to(m)

# Plot route points with markers
for i in range(len(routePoints)):
    if i == 0:
        folium.Marker(
            [routePoints[i]["latitude"], routePoints[i]["longitude"]],
            popup='User Location',
            icon=folium.Icon(color='red')
        ).add_to(m)
    elif i == len(routePoints) - 1:
        folium.Marker(
            [routePoints[i]["latitude"], routePoints[i]["longitude"]],
            popup='End Location',
            icon=folium.Icon(color='green')
        ).add_to(m)
    else:
        folium.Marker(
            [routePoints[i]["latitude"], routePoints[i]["longitude"]],
            popup=routePoints[i]["name"],
            icon=folium.Icon(color='blue')
        ).add_to(m)


# Display the map in Streamlit
st_folium(m)
